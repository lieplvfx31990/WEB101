<!DOCTYPE html>
<html lang="vn">
  <head>
    <title>lab18.8.2. Cải thiện Tip calculator</title>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" type="image/x-icon" href="./icons/favicon.png" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="./js/lab18.8.2.js"></script>
  </head>
  <body>
    <div class="container my-3">
      <h3>Lab 18.8.2</h3>
      <div
        class="container my-3 py-3 px-3"
        style="background-color: aquamarine"
      >
        <p style="font-size: large; font-weight: bold">
          Cải thiện Tip calculator
        </p>
        <p style="font-size: small">
          Hãy cải thiện thêm tip calculator của Steven trong bài lab 17.7.2, lần
          này sử dụng các vòng lặp!
        </p>
        <ol style="font-size: small">
          <li class="mb-2">
            <strong>Nhiệm vụ của bạn:</strong>
            <ul>
              <li class="mb-1">
                Tạo array 'bills' chứa tất cả 10 giá trị hóa đơn kiểm tra.
              </li>
              <li class="mb-1">Tạo các array rỗng cho 'tips' và 'totals'.</li>
              <li>
                Sử dụng hàm 'calcTip' mà bạn đã viết trước đó (không cần lặp
                lại) để tính các giá trị tips và totals (hóa đơn + tiền boa) cho
                mỗi giá trị bill trong bills array. Sử dụng vòng lặp for để thực
                hiện 10 phép tính!.
              </li>
            </ul>
          </li>
          <li>
            <strong>Dữ liệu kiểm tra:</strong>
            <ul>
              <li>22, 295, 176, 440, 37, 105, 10, 1100, 86 và 52</li>
            </ul>
          </li>
        </ol>
        <ol style="font-size: small; list-style: none">
          <li class="mb-2">
            <strong>Gợi ý:</strong> Gọi 'calcTip' trong vòng lặp và dùng phương
            thức push để thêm giá trị cho các array tips và totals.
          </li>
          <li>
            <strong>Bonus:</strong> Viết hàm 'calcAverage' nhận array 'arr' làm
            tham số . Hàm này tính trung bình tất cả các số đã cho trong array.
            Đây là một thử thách khó (chúng ta chưa từng thực hiện điều này
            trước đây)! Dưới đây là hướng dẫn thực hiện:
            <ul>
              <li class="my-1">
                Trước tiên, bạn cần cộng tất cả các giá trị trong array. Để thực
                hiện phép cộng, tạo biến 'sum' bắt đầu từ 0. Sau đó lặp qua
                array, sử dụng vòng lặp for. Ở mỗi lần lặp, cộng giá trị hiện
                tại vào biến 'sum'. Như vậy, ở cuối vòng lặp, bạn sẽ cộng được
                tất cả các giá trị với nhau.
              </li>
              <li class="my-1">
                Để tính trung bình, chia tổng mà bạn vừa tính trước đó cho độ
                dài của array (vì đó là số phần tử).
              </li>
              <li class="my-1">Gọi hàm với array 'total'.</li>
            </ul>
          </li>
        </ol>
      </div>
      <h3>Thực hành</h3>
      <div
        class="container my-3 py-3 px-3"
        style="background-color: rgb(218, 218, 218)"
      >
        <p style="font-size: large; font-weight: bold">
          Improving Tip calculator
        </p>
        <div
          class="container my-3 py-1 bg-white"
          style="border-left: solid 4px cyan; font-size: small"
        >
          <p>
            <span style="color: green"
              >// The function that calculates tip from input bill value</span
            ><br />
            <span style="color: blue">const</span> calcTip = (bill) =><br />&nbsp;&nbsp;&nbsp;&nbsp;bill
            >= <span style="color: red">50</span> && bill &lt;=
            <span style="color: red">300</span> ?
            <span style="color: red">0.15</span> * bill :
            <span style="color: red">0.3</span> * bill;
          </p>
          <p>
            <span style="color: green"
              >// The function calculates the average value of all elements of
              an input array (arr).</span
            ><br />
            <span style="color: green"
              >// This also considers the case of input parameter arr is a
              number or a string of decimal digits.</span
            ><br />
            <span style="color: green"
              >// All other cases of arr, the function returns NaN (Not a
              Number)</span
            ><br />
            <span style="color: blue">const</span> calcAverage =
            <span style="color: blue">function</span> (arr) {<br />&nbsp;&nbsp;&nbsp;&nbsp;<span
              style="color: blue"
              >let</span
            >
            retval =
            <span style="color: red">0</span
            >;<br />&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue">if</span
            >(arr <span style="color: deeppink">instanceof</span>
            <span style="color: blue">Array</span>) {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
              style="color: blue"
              >for</span
            >
            (<span style="color: blue">let</span> i =
            <span style="color: red">0</span>; i &lt; arr.<span
              style="color: blue"
              >length</span
            >; i++) retval += arr[i];<br />
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;retval /= arr.<span
              style="color: blue"
              >length</span
            >;<br />&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span style="color: blue"
              >else</span
            >
            retval =
            <span style="color: blue">Number</span
            >(arr);<br />&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue"
              >return</span
            >
            retval;<br />}
          </p>
          <p>
            <span style="color: green"
              >// Create an array that contains provided data of bills</span
            ><br />
            <span style="color: blue">let</span> bills = [<span
              style="color: red"
              >22</span
            >, <span style="color: red">295</span>,
            <span style="color: red">176</span>,
            <span style="color: red">440</span>,
            <span style="color: red">37</span>,
            <span style="color: red">105</span>,
            <span style="color: red">10</span>,
            <span style="color: red">1100</span>,
            <span style="color: red">86</span>,
            <span style="color: red">52</span>];
          </p>
          <p>
            <span style="color: green"
              >// Create an array that contains the values of tips calculated
              from provided data of bills</span
            ><br />
            <span style="color: blue">let</span> tips = [];<br />
            <span style="color: blue">for</span> (<span style="color: blue"
              >let</span
            >
            i = <span style="color: red">0</span>; i < bills.<span
              style="color: blue"
              >length</span
            >; i++) tips.<span style="color: blue">push</span
            >(calcTip(bills[i]));
          </p>
          <p>
            <span style="color: green"
              >// Create an array that contains the values of (bill + tip)
              calculated from provided data of bills</span
            ><br />
            <span style="color: blue">let</span> totals = [];<br />
            <span style="color: blue">for</span> (<span style="color: blue"
              >let</span
            >
            i = <span style="color: red">0</span>; i < bills.<span
              style="color: blue"
              >length</span
            >; i++) totals.<span style="color: blue">push</span>(bills[i] +
            calcTip(bills[i]));
          </p>
          <p>
            <span style="color: green"
              >// Average value of all elements in array of totals</span
            ><br />
            <span style="color: blue">let</span> averageTotals =
            calcAverage(totals);
          </p>
        </div>
        <p style="font-size: large; font-weight: bold">Kiểm tra kết quả</p>
        <table class="table table-bordered">
          <tr>
            <th style="width: 20%">
              <button
                type="button"
                class="btn btn-primary mb-1"
                style="width: 100%"
                onclick="runcaltip()"
              >
                tip = ?
              </button>
            </th>
            <td style="width: 40%">
              <input
                id="in_bill"
                type="number"
                class="form-control mb-1"
                placeholder="Enter a value of bill"
                autocomplete="off"
              />
            </td>
            <td style="width: 40%">
              <p id="p_cal_tip" class="form-control mb-1">&nbsp;</p>
            </td>
          </tr>
        </table>
        <table class="table table-bordered">
          <tr>
            <th style="width: 20%; text-align: center">
              <p class="form-control mb-1">bills</p>
            </th>
            <td style="width: 80%">
              <p id="p_bills" class="form-control mb-1">&nbsp;</p>
            </td>
          </tr>
          <tr>
            <th style="width: 20%">
              <button
                type="button"
                class="btn btn-primary mb-1"
                style="width: 100%"
                onclick="runTips()"
              >
                tips = ?
              </button>
            </th>
            <td style="width: 80%">
              <p id="p_tips" class="form-control mb-1">&nbsp;</p>
            </td>
          </tr>
          <tr>
            <th style="width: 20%">
              <button
                type="button"
                class="btn btn-primary mb-1"
                style="width: 100%"
                onclick="runTotal()"
              >
                totals = ?
              </button>
            </th>
            <td style="width: 80%">
              <p id="p_total" class="form-control mb-1">&nbsp;</p>
            </td>
          </tr>
          <tr>
            <th style="width: 20%">
              <button
                type="button"
                class="btn btn-primary mb-1"
                style="width: 100%"
                onclick="runCalAverage()"
              >
                averageTotals = ?
              </button>
            </th>
            <td style="width: 80%">
              <p id="p_average" class="form-control mb-1">&nbsp;</p>
            </td>
          </tr>
        </table>
      </div>
    </div>
    <script>
      // Create an array that contains provided data of bills
      let bills = [22, 295, 176, 440, 37, 105, 10, 1100, 86, 52];
      document.getElementById("p_bills").innerHTML = `[${bills}]`;
      function runcaltip() {
        let bill_val = Number(document.getElementById("in_bill").value);
        let tip_val = calcTip(bill_val);
        document.getElementById("p_cal_tip").innerHTML = `${tip_val}`;
      }

      function runTips() {
        let tipsarr = tips(bills);
        document.getElementById("p_tips").innerHTML = `[${tipsarr}]`;
      }
      function runTotal() {
        let totalarr = totals(bills);
        document.getElementById("p_total").innerHTML = `[${totalarr}]`;
      }
      function runCalAverage() {
        let averTotals = calcAverage(totals(bills));
        document.getElementById("p_average").innerHTML = averTotals;
      }
    </script>
  </body>
</html>
